# 共通仕様：エラーハンドリング

本ドキュメントは、画面設計書で共通して使用するエラーハンドリングの仕様を定義します。

## 1. クライアント側エラー

### 1.1. バリデーションエラー
- フォーム内にエラーメッセージを表示
- エラーがある項目の下に赤色でエラーメッセージを表示
- 例：「案件名を入力してください」「メールアドレスの形式が正しくありません」

### 1.2. ネットワークエラー
- 「通信エラーが発生しました。再度お試しください。」と表示
- リトライボタンを表示する場合もある

---

## 2. サーバー側エラー

### 2.1. 400 Bad Request
- **原因**: バリデーションエラー
- **対応**: エラーメッセージを表示
- **表示方法**: フォーム内にエラーメッセージを表示

### 2.2. 401 Unauthorized
- **原因**: 認証エラー（セッション切れ、未ログインなど）
- **対応**: ログイン画面へリダイレクト
- **表示方法**: 必要に応じて「セッションが切れました。再度ログインしてください。」などのメッセージを表示

### 2.3. 500 Internal Server Error
- **原因**: サーバー側のシステムエラー
- **対応**: 「システムエラーが発生しました。しばらくしてから再度お試しください。」と表示
- **表示方法**: トースト通知またはモーダルで表示

---

## 3. その他のエラー

### 3.1. 403 Forbidden
- **原因**: 権限不足
- **対応**: 「この操作を実行する権限がありません。」と表示
- **表示方法**: エラーメッセージを表示し、適切な画面へリダイレクト

### 3.2. 404 Not Found
- **原因**: リソースが見つからない
- **対応**: 「指定されたリソースが見つかりません。」と表示
- **表示方法**: エラーページまたは適切な画面へリダイレクト

### 3.3. タイムアウトエラー
- **原因**: リクエストがタイムアウト
- **対応**: 「リクエストがタイムアウトしました。再度お試しください。」と表示
- **表示方法**: トースト通知で表示

---

## 4. エラー表示の原則

1. **ユーザーフレンドリー**: 技術的なエラーメッセージではなく、ユーザーが理解しやすいメッセージを表示
2. **明確な指示**: エラーが発生した場合の対処方法を提示
3. **一貫性**: 同じ種類のエラーは同じメッセージで表示
4. **視認性**: エラーメッセージは目立つ色（赤色など）で表示
